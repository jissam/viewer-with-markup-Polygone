/*! For license information please see 116.js.LICENSE.txt */
"use strict";(self.webpackChunkviewer=self.webpackChunkviewer||[]).push([[116],{9924:(t,e,n)=>{n.d(e,{a:()=>A});var i=n(1604),s=n(5390),o=n(5194);(0,o.i)(),(0,o.i)();var{I:l}=s.c,a=()=>document.createComment(""),r=(t,e,n)=>{var i;let s=t._$AA.parentNode,o=void 0===e?t._$AB:e._$AA;if(void 0===n){let e=s.insertBefore(a(),o),i=s.insertBefore(a(),o);n=new l(e,i,t,t.options)}else{let e=n._$AB.nextSibling,l=n._$AM,a=l!==t;if(a){let e;null==(i=n._$AQ)||i.call(n,t),n._$AM=t,void 0!==n._$AP&&(e=t._$AU)!==l._$AU&&n._$AP(e)}if(e!==o||a){let t=n._$AA;for(;t!==e;){let e=t.nextSibling;s.insertBefore(t,o),t=e}}}return n},u=(t,e,n=t)=>(t._$AI(e,n),t),d={},c=t=>{var e;null==(e=t._$AP)||e.call(t,!1,!0);let n=t._$AA,i=t._$AB.nextSibling;for(;n!==i;){let t=n.nextSibling;n.remove(),n=t}},h=(t,e,n)=>{let i=new Map;for(let s=e;s<=n;s++)i.set(t[s],s);return i},A=(0,i.b)(class extends i.c{constructor(t){if(super(t),t.type!==i.a.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,n){let i;void 0===n?n=e:void 0!==e&&(i=e);let s=[],o=[],l=0;for(let e of t)s[l]=i?i(e,l):l,o[l]=n(e,l),l++;return{values:o,keys:s}}render(t,e,n){return this.dt(t,e,n).values}update(t,[e,n,i]){var o;let l=(t=>t._$AH)(t),{values:a,keys:A}=this.dt(e,n,i);if(!Array.isArray(l))return this.ut=A,a;let v,p,$=null!=(o=this.ut)?o:this.ut=[],f=[],m=0,y=l.length-1,_=0,b=a.length-1;for(;m<=y&&_<=b;)if(null===l[m])m++;else if(null===l[y])y--;else if($[m]===A[_])f[_]=u(l[m],a[_]),m++,_++;else if($[y]===A[b])f[b]=u(l[y],a[b]),y--,b--;else if($[m]===A[b])f[b]=u(l[m],a[b]),r(t,f[b+1],l[m]),m++,b--;else if($[y]===A[_])f[_]=u(l[y],a[_]),r(t,l[m],l[y]),y--,_++;else if(void 0===v&&(v=h(A,_,b),p=h($,m,y)),v.has($[m]))if(v.has($[y])){let e=p.get(A[_]),n=void 0!==e?l[e]:null;if(null===n){let e=r(t,l[m]);u(e,a[_]),f[_]=e}else f[_]=u(n,a[_]),r(t,l[m],n),l[e]=null;_++}else c(l[y]),y--;else c(l[m]),m++;for(;_<=b;){let e=r(t,f[b+1]);u(e,a[_]),f[_++]=e}for(;m<=y;){let t=l[m++];null!==t&&c(t)}return this.ut=A,((t,e=d)=>{t._$AH=e})(t,f),s.b}});(0,o.i)()},1604:(t,e,n)=>{n.d(e,{a:()=>i,b:()=>s,c:()=>o}),(0,n(5194).i)();var i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},s=t=>(...e)=>({_$litDirective$:t,values:e}),o=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}},3116:(t,e,n)=>{n.r(e),n.d(e,{CommentsContent:()=>d});var i=n(9924),s=n(1949),o=(n(6425),n(1604),n(3299)),l=n(5390),a=(n(5022),n(5194));(0,a.i)();var r=(0,o.a)(l.e),u=[r.styles,s.d],d=class extends r{constructor(){super(),this.unselectAnnotation=()=>{this.selectedAnnotation=null},this.unselectAnnotationEsc=t=>{t&&"Escape"!==(null==t?void 0:t.key)||(this.selectedAnnotation=null)},this.selectAnnotation=({detail:t})=>{let{uuid:e}=t;this.selectedAnnotation!==e?this.selectedAnnotation=e:this.selectedAnnotation=null},this.checkLastAnnotation=t=>{var e,n;let i=this.annotations.filter((t=>t.resolved)),s=this.annotations.filter((t=>!t.resolved));return"All comments"===this.annotationFilter?t===(null==(e=i[i.length-1])?void 0:e.uuid):t===(null==(n=s[s.length-1])?void 0:n.uuid)},this.annotations=[],this.participantsList=[]}updated(t){super.updated(t),this.updateComplete.then((()=>{let t=this.shadowRoot.querySelector(`[uuid='${this.selectedAnnotation}']`);if(!t)return;let e=this.lastCommentId===this.selectedAnnotation,n=e?0:-150,i=t.getClientRects()[0];i&&(this.scrollBy(0,i.y+n),e&&setTimeout((()=>{this.scrollBy(0,i.y+n)}),200))}))}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}render(){return l.a` ${(0,i.a)(this.annotations.filter((t=>{var e;return null==(e=t.comments)?void 0:e.length})),(t=>t.uuid),(t=>l.a`
        <superviz-comments-annotation-item
          annotation=${JSON.stringify(t)}
          selected="${this.selectedAnnotation}"
          annotationFilter=${this.annotationFilter}
          uuid=${t.uuid}
          ?resolved=${t.resolved}
          isLastComment=${this.checkLastAnnotation(t.uuid)}
          participantsList=${JSON.stringify(this.participantsList)}
        >
        </superviz-comments-annotation-item>
      `))}`}};d.styles=u,d.properties={annotations:{type:Object},selectedAnnotation:{type:String},annotationFilter:{type:String},participantsList:{type:Object}},d=(0,a.g)([(0,l.f)("superviz-comments-content")],d)}}]);